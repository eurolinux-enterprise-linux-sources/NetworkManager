From f970456dc35c4e551a9a0cf7df5ad4fc8a210ca4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ji=C5=99=C3=AD=20Klime=C5=A1?= <jklimes@redhat.com>
Date: Tue, 22 Oct 2013 16:08:15 +0200
Subject: [PATCH 1/1] libnm-glib: fix nm_device_vlan_get_vlan_id() getting
 VLAN ID (rh #1021953)

https://bugzilla.redhat.com/show_bug.cgi?id=1021953
---
 libnm-glib/nm-device-vlan.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/libnm-glib/nm-device-vlan.c b/libnm-glib/nm-device-vlan.c
index a470dd6..986ad53 100644
--- a/libnm-glib/nm-device-vlan.c
+++ b/libnm-glib/nm-device-vlan.c
@@ -136,27 +136,27 @@ nm_device_vlan_get_carrier (NMDeviceVlan *device)
  * nm_device_vlan_get_vlan_id:
  * @device: a #NMDeviceVlan
  *
  * Returns: the device's VLAN ID
  **/
 guint
 nm_device_vlan_get_vlan_id (NMDeviceVlan *device)
 {
 	NMDeviceVlanPrivate *priv;
 
-	g_return_val_if_fail (NM_IS_DEVICE_VLAN (device), FALSE);
+	g_return_val_if_fail (NM_IS_DEVICE_VLAN (device), 0);
 
 	priv = NM_DEVICE_VLAN_GET_PRIVATE (device);
 	if (!priv->vlan_id) {
 		priv->vlan_id = _nm_object_get_uint_property (NM_OBJECT (device),
-													  NM_DBUS_INTERFACE_DEVICE_VLAN,
-													  DBUS_PROP_CARRIER);
+		                                              NM_DBUS_INTERFACE_DEVICE_VLAN,
+		                                              DBUS_PROP_VLAN_ID);
 	}
 
 	return priv->vlan_id;
 }
 
 /***********************************************************/
 
 static void
 nm_device_vlan_init (NMDeviceVlan *device)
 {
-- 
1.7.11.7

