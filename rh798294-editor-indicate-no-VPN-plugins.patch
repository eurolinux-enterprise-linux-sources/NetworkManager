From 0330ecae2eec0d4dfccd57921f1992b8e245e2da Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ji=C5=99=C3=AD=20Klime=C5=A1?= <jklimes@redhat.com>
Date: Thu, 9 Dec 2010 09:15:42 +0100
Subject: [PATCH] editor: when no VPN plugin is installed, indicate that in
 the tooltip of "Add" button (bgo #625160)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit


Signed-off-by: Jiří Klimeš <jklimes@redhat.com>
---
 src/connection-editor/nm-connection-list.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/network-manager-applet-0.8.1/src/connection-editor/nm-connection-list.c b/network-manager-applet-0.8.1/src/connection-editor/nm-connection-list.c
index 54a3a2f..44b7510 100644
--- a/network-manager-applet-0.8.1/src/connection-editor/nm-connection-list.c
+++ b/network-manager-applet-0.8.1/src/connection-editor/nm-connection-list.c
@@ -1272,10 +1272,14 @@ add_connection_buttons (NMConnectionList *self,
 	g_signal_connect (button, "clicked", G_CALLBACK (add_clicked), info);
 	if (ctype == NM_TYPE_SETTING_VPN) {
 		GHashTable *plugins;
+		gboolean have_plugins;
 
 		/* disable the "Add..." button if there aren't any VPN plugins */
 		plugins = vpn_get_plugins (NULL);
-		gtk_widget_set_sensitive (button, (plugins && g_hash_table_size (plugins)));
+		have_plugins = plugins && g_hash_table_size (plugins);
+		gtk_widget_set_sensitive (button, have_plugins);
+		if (!have_plugins)
+			gtk_widget_set_tooltip_text (button, _("No VPN plugin available. Please install one in order to enable this button."));
 	}
 	if (new_func)
 		action_info_set_new_func (info, new_func);
-- 
1.7.7.6

